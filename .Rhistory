accordion_panel(
title = "Section C",
icon = bsicons::bs_icon("bar-chart"),
"Section C content"
),
accordion_panel(
title = "Section D",
icon = bsicons::bs_icon("calendar-date"),
"Section D content"
),
id = "acc",
open = "Section A"
)
)
server <- function(input, output) {
}
shinyApp(ui = ui, server = server)
runApp()
runApp('modules/mod_ui.R')
runApp('modules/mod_ui.R')
library(glue)
library(readxl)
library(tidyverse)
library(giscoR)
library(janitor)
library(bslib)
# ---- Load Data ----
# Use relative paths for deployment
Daten_Landkreis_excel <- read_xlsx("data/Public_Data_Landkreis.xlsx")
germany_districts <- gisco_get_nuts(
year = "2021",
nuts_level = 3,
epsg = 3035,
country = 'Germany'
) |> janitor::clean_names()
# Join map with data
Daten_Landkreis_joined <- germany_districts |>
inner_join(Daten_Landkreis_excel, by = c("nuts_id" = "NUTS"))
# Convert data to long format
Daten_long <- Daten_Landkreis_joined |>
pivot_longer(
cols = matches("^\\d{4}"),
names_to = "year_variable",
values_to = "value"
) |>
separate(
year_variable,
into = c("year", "variable"),
sep = "\\r\\n|\\s",
extra = "merge",
fill = "right"
)
runApp()
runApp()
runApp()
runApp()
getwd()
shiny::runApp()
getwd
getwd()
rsconnect::deployApp("C:/Users/Lenovo/Desktop/HiWi/landkreis_dashboard_experimental")
shiny::runApp()
runApp()
runApp()
mod_main_ui <- function(id) {
ns <- NS(id)
fluidPage(
theme = bs_theme(bootswatch = "minty", version = 5),
tags$head(
tags$style(HTML("
body { background-color: #f8f9fa; }
.logo { width:60px; max-width:60px; height:auto; margin-right:12px; }
.app-title { color: #0b7285; font-weight:700; font-size:1.5rem; }
.accordion-button { font-weight:600; }
.accordion-body { padding: 0.75rem; font-size:0.9rem; }
/* ---- Carousel: show full image ---- */
.carousel-inner img {
width:100%;
height:auto;
object-fit:contain;
max-height:400px;
background-color:#fff;
}
/* ---- Tax rate selector styling ---- */
.tax-rate-selector {
background-color: #e7f5ff;
padding: 1rem;
border-radius: 0.5rem;
margin-bottom: 1rem;
border: 1px solid #0b7285;
}
@media (max-width:768px) {
.carousel-inner img { max-height:240px; }
.app-title { font-size:1.2rem; }
.accordion-body { font-size:0.85rem; padding:0.5rem; }
}
")),
tags$script(src = "https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js")
),
# --- Top Carousel ---
div(id = ns("topCarousel"), class = "carousel slide mb-3", `data-bs-ride` = "carousel",
tags$div(class = "carousel-inner",
tags$div(class = "carousel-item active",
img(src = "Picture 1.jpg", class = "d-block w-100", alt = "Banner 1")
),
tags$div(class = "carousel-item",
img(src = "Picture 2.jpg", class = "d-block w-100", alt = "Banner 2")
)
),
tags$button(class = "carousel-control-prev", type = "button",
`data-bs-target` = paste0("#", ns("topCarousel")), `data-bs-slide` = "prev",
span(class = "carousel-control-prev-icon", `aria-hidden` = "true"),
span(class = "visually-hidden", "Previous")
),
tags$button(class = "carousel-control-next", type = "button",
`data-bs-target` = paste0("#", ns("topCarousel")), `data-bs-slide` = "next",
span(class = "carousel-control-next-icon", `aria-hidden` = "true"),
span(class = "visually-hidden", "Next")
)
),
# --- Header (logo + title) ---
fluidRow(
column(
width = 12,
div(class = "d-flex flex-column flex-md-row align-items-center justify-content-center mb-3",
img(src = "img/logo.png", class = "logo mb-2 mb-md-0"),
div(
class = "text-center",
tags$h2("Deutsches Dashboard f√ºr √∂ffentliche Daten", class = "app-title"),
tags$small("Interaktiver Landkreis-Explorer")
)
)
)
),
# --- Accordion ---
tags$div(class = "accordion", id = ns("mainAccordion"),
# --- Combined Map + Controls Panel ---
tags$div(class = "accordion-item",
tags$h2(class = "accordion-header", id = ns("headingViz")),
tags$button(
class = "accordion-button", type = "button",
`data-bs-toggle` = "collapse",
`data-bs-target` = paste0("#", ns("collapseViz")),
`aria-expanded` = "true",
`aria-controls` = ns("collapseViz"),
"üó∫Ô∏è Karte & üìä Zeitreihe"
),
tags$div(
id = ns("collapseViz"),
class = "accordion-collapse collapse show",
`aria-labelledby` = ns("headingViz"),
`data-bs-parent` = paste0("#", ns("mainAccordion")),
tags$div(class = "accordion-body",
# ---- TAX RATE SELECTOR (NEW) ----
div(class = "tax-rate-selector",
fluidRow(
column(width = 12,
tags$h5("üí∞ Steuermesslate", style = "color: #0b7285; margin-bottom: 0.75rem;")
),
column(width = 12, md = 6,
selectInput(
inputId = ns("tax_type"),
label = "Steuerart:",
choices = c(
"Gewerbesteuer" = "gewerbe",
"Grundsteuer A (Land- und Forstwirtschaft)" = "grundsteuer_a",
"Grundsteuer B (Bebaute/Bebaubare Grundst√ºcke)" = "grundsteuer_b"
),
selected = "gewerbe",
width = "100%"
)
),
column(width = 12, md = 6,
sliderInput(
inputId = ns("tax_year"),
label = "Jahr:",
min = 2015,
max = 2024,
value = 2024,
step = 1,
sep = "",
width = "100%"
)
)
),
fluidRow(
column(width = 12,
tags$small(class = "text-muted",
"Die Steuermesslate wird auf der Karte als Overlay angezeigt. H√∂here Raten werden dunkler dargestellt.")
)
)
),
# ---- PARAMETER SELECTOR ----
pickerInput(
inputId = ns("selected_param"),
label = "Parameter ausw√§hlen:",
choices = unique(Daten_long$variable),
selected = unique(Daten_long$variable)[1],
options = list(
`liveSearch` = TRUE,
`size` = 5
),
width = "100%"
),
tags$div(class = "mt-2 mb-3",
p(tags$small("Tipp: Verwenden Sie das Suchfeld, wenn die Indikatorliste lang ist."))
),
# ---- Map + Chart ----
fluidRow(
column(width = 12, class = "mb-2",
tags$small("Klicken Sie auf eine Region, um das Zeitreihendiagramm zu aktualisieren.")
),
column(width = 12, md = 7,
girafeOutput(ns("map_plot"), width = "100%", height = "400px"),
# Legend for tax rates
div(class = "mt-2 p-2", style = "background-color: #f8f9fa; border-radius: 0.25rem;",
tags$small(
strong("Steuermesslate Legende: "),
"Hell = Niedrige Rate | Dunkel = Hohe Rate"
)
)
),
column(width = 12, md = 5,
girafeOutput(ns("bar_plot"), width = "100%", height = "400px")
)
)
)
)
),
# --- About / Metadata Panel ---
tags$div(class = "accordion-item",
tags$h2(class = "accordion-header", id = ns("headingAbout")),
tags$button(
class = "accordion-button collapsed", type = "button",
`data-bs-toggle` = "collapse",
`data-bs-target` = paste0("#", ns("collapseAbout")),
`aria-expanded` = "false",
`aria-controls` = ns("collapseAbout"),
"‚ÑπÔ∏è √úber & Metadaten"
),
tags$div(
id = ns("collapseAbout"),
class = "accordion-collapse collapse",
`aria-labelledby` = ns("headingAbout"),
`data-bs-parent` = paste0("#", ns("mainAccordion")),
tags$div(class = "accordion-body",
tags$p(strong("Quelle:"), " Lorem ipsum dolor sit amet, consectetur adipiscing elit."),
tags$p(strong("Beschreibung:"), " Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."),
tags$p(strong("Datenquellen:"),
tags$ul(
tags$li("Demografische und wirtschaftliche Daten: Statistisches Bundesamt"),
tags$li("Steuermesslate: Kommunale Steuerdatenbank")
)
),
tags$p(strong("Kontakt:"), " email@example.com")
)
)
)
),
hr(),
div(class = "text-center text-muted small", "¬© 2025 Data Visualization Project ‚Äì Built with R Shiny")
)
}
runApp()
runApp()
runApp()
runApp()
getwd()
rsconnect::deployApp("C:/Users/Lenovo/Desktop/HiWi/landkreis_dashboard_experimental")
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
fluidPage(
theme = bs_theme(bootswatch = "minty", version = 5),
# ======================== STYLES ========================
tags$head(
tags$style(HTML("
/* --- Global --- */
html, body {
background-color: #f8f9fa;
overflow-x: hidden;
margin: 0;
padding: 0;
}
.container-fluid, .container {
padding-left: 0;
padding-right: 0;
}
/* logo & title */
.logo { width: 60px; max-width: 60px; height: auto; margin-right: 12px; }
.app-title { color: #0b7285; font-weight: 700; font-size: 1.5rem; margin: 0; }
/* accordion */
.accordion-button { font-weight: 600; font-size: 1.1rem; }
.accordion-button:not(.collapsed) { background-color: #e7f5ff; color: #0b7285; }
.accordion-body { padding: 1rem; font-size: 0.95rem; }
.accordion-item { margin-bottom: 0; }
/* hr */
hr { margin: 0.5rem 0 !important; }
/* Carousel */
.carousel.slide { margin-bottom: 0.5rem; }
.carousel-inner img {
width: 100%;
height: auto;
object-fit: cover;
max-height: 360px;
display: block;
background-color: #fff;
}
.carousel-control-prev-icon, .carousel-control-next-icon { filter: invert(1); }
/* Info box */
.info-box {
background-color: #e7f5ff;
border-left: 4px solid #0b7285;
padding: 0.75rem;
margin-bottom: 1rem;
border-radius: 0.25rem;
}
/* Plot container */
.plot-container {
background-color: white;
border-radius: 0.5rem;
padding: 0.5rem;
box-shadow: 0 0.125rem 0.25rem rgba(0,0,0,0.075);
margin-bottom: 0;
}
/* Minimal gaps for plots */
.plots-row .col { padding-bottom: 0.25rem; margin-bottom: 0; }
.plots-row .col:last-child { padding-bottom: 0; }
.plots-row > .col > .plot-container { margin-bottom: 0; }
/* --- Fixed height for plots (map + bar) --- */
.map-girafe, .bar-girafe {
width: 100% !important;
height: 300px !important;
min-height: 300px !important;
max-height: 300px !important;
padding: 0 !important;
margin: 0 !important;
}
.map-girafe svg, .bar-girafe svg { width: 100% !important; height: 100% !important; }
/* --- MOBILE --- */
@media (max-width: 768px) {
body, .container-fluid, .container, .fluidPage {
padding: 0 !important;
margin: 0 !important;
}
.carousel-inner img { max-height: 220px !important; object-fit: cover !important; }
.carousel.slide { margin-bottom: 0.25rem !important; }
.app-title { font-size: 1.15rem; margin-bottom: 0.15rem; }
.logo { width: 50px; max-width: 50px; margin-bottom: 0.15rem; }
.accordion-body {
font-size: 0.86rem;
padding: 0.45rem 0.5rem !important;
}
.accordion-button {
padding: 0.35rem 0.75rem !important;
font-size: 1rem !important;
}
.info-box { padding: 0.45rem !important; margin-bottom: 0.35rem !important; }
.map-girafe, .bar-girafe {
height: 300px !important;
min-height: 300px !important;
max-height: 300px !important;
}
.mb-4, .mb-3, .mb-2, .pb-3 {
margin-bottom: 0 !important;
padding-bottom: 0 !important;
}
h5, p, ul, li, small {
margin-bottom: 0.3rem !important;
line-height: 1.15 !important;
}
hr { margin: 0.4rem 0 !important; }
}
")),
tags$script(src = "https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js")
),
# ======================== IMAGE CAROUSEL ========================
div(
id = ns("topCarousel"),
class = "carousel slide mb-2",
`data-bs-ride` = "carousel",
tags$div(
class = "carousel-indicators",
tags$button(type = "button", `data-bs-target` = paste0("#", ns("topCarousel")),
`data-bs-slide-to` = "0", class = "active", `aria-current` = "true", `aria-label` = "Slide 1"),
tags$button(type = "button", `data-bs-target` = paste0("#", ns("topCarousel")),
`data-bs-slide-to` = "1", `aria-label` = "Slide 2")
),
tags$div(
class = "carousel-inner",
tags$div(class = "carousel-item active", img(src = "Picture 1.jpg", class = "d-block w-100", alt = "Banner 1")),
tags$div(class = "carousel-item", img(src = "Picture 2.jpg", class = "d-block w-100", alt = "Banner 2"))
),
tags$button(class = "carousel-control-prev", type = "button",
`data-bs-target` = paste0("#", ns("topCarousel")), `data-bs-slide` = "prev",
span(class = "carousel-control-prev-icon", `aria-hidden` = "true"),
span(class = "visually-hidden", "Previous")),
tags$button(class = "carousel-control-next", type = "button",
`data-bs-target` = paste0("#", ns("topCarousel")), `data-bs-slide` = "next",
span(class = "carousel-control-next-icon", `aria-hidden` = "true"),
span(class = "visually-hidden", "Next"))
),
# ======================== HEADER ========================
fluidRow(
column(
width = 12,
div(
class = "d-flex flex-column flex-md-row align-items-center justify-content-center mb-4",
img(src = "img/logo.png", class = "logo mb-2 mb-md-0"),
div(
class = "text-center",
tags$h1("Deutsches Dashboard f√ºr √∂ffentliche Daten", class = "app-title"),
tags$p(class = "text-muted mb-0", style = "font-size: 0.95rem;",
"Interaktiver Landkreis-Explorer mit Zeitreihenanalyse")
)
)
)
),
# ======================== MAIN ACCORDION ========================
tags$div(
class = "accordion",
id = ns("mainAccordion"),
# --- PANEL 1: MAP & TIME SERIES ---
tags$div(
class = "accordion-item",
tags$h2(
class = "accordion-header",
id = ns("headingViz"),
tags$button(
class = "accordion-button",
type = "button",
`data-bs-toggle` = "collapse",
`data-bs-target` = paste0("#", ns("collapseViz")),
`aria-expanded` = "true",
`aria-controls` = ns("collapseViz"),
"üó∫Ô∏è Interaktive Karte & üìä Zeitreihenanalyse"
)
),
tags$div(
id = ns("collapseViz"),
class = "accordion-collapse collapse show",
`aria-labelledby` = ns("headingViz"),
`data-bs-parent` = paste0("#", ns("mainAccordion")),
tags$div(
class = "accordion-body",
div(class = "info-box",
tags$p(class = "mb-0",
tags$strong("üí° Anleitung: "),
"W√§hlen Sie einen Parameter aus der Liste, klicken Sie auf eine Region in der Karte,
und sehen Sie sich die Zeitreihe im Diagramm an.")
),
fluidRow(
column(
width = 12,
tags$label(class = "form-label fw-bold", `for` = ns("selected_param"), "üìä Parameter ausw√§hlen:"),
selectInput(ns("selected_param"), NULL, choices = variable_choices, width = "100%"),
tags$small(class = "text-muted", "Tipp: Beginnen Sie mit der Eingabe, um die Liste zu durchsuchen.")
)
),
tags$hr(class = "my-2"),
# --- Plots ---
fluidRow(
class = "g-0 plots-row",
column(width = 12, md = 7,
div(class = "plot-container map-girafe", girafeOutput(ns("map_plot"), width = "100%", height = "300px"))),
column(width = 12, md = 5,
div(class = "plot-container bar-girafe", girafeOutput(ns("bar_plot"), width = "100%", height = "300px"))
)
)
)
)
)
),
# ======================== FOOTER ========================
tags$hr(class = "mt-4"),
div(
class = "text-center text-muted small pb-3",
tags$p(class = "mb-1", "¬© 2025 Data Visualization Project"),
tags$p(class = "mb-0", "Built with ‚ù§Ô∏è using ",
tags$a(href = "https://shiny.posit.co/", target = "_blank", "R Shiny"),
" | ",
tags$a(href = "https://rstudio.github.io/bslib/", target = "_blank", "bslib"),
" | ",
tags$a(href = "https://davidgohel.github.io/ggiraph/", target = "_blank", "ggiraph"))
)
)
runApp()
getwd()
rsconnect::deployApp("C:/Users/Lenovo/Desktop/HiWi/landkreis_dashboard_experimental")
runApp()
rsconnect::deployApp("C:/Users/Lenovo/Desktop/HiWi/landkreis_dashboard_experimental")
shiny::runApp()
runApp()
names(Daten_Landkreis_excel)
runApp()
runApp()
runApp()
getwd()
rsconnect::deployApp("C:/Users/Lenovo/Desktop/HiWi/landkreis_dashboard_experimental")
runApp()
